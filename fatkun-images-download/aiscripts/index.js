chrome.storage.local.get("use_old_view",function(t){var s=t.use_old_view,e="aiscripts2";t.use_old_view&&(e="aiscripts");new Vue({el:"#app",data:{aiscripts:[],i18n:currentI18n},mounted:function(){var t=this;chrome.runtime.sendMessage({cmd:"GET_AISCRIPTS"},function(i){$.ajax({url:gConfig.staticServer+"/"+e+"/scripts.json?_="+Date.now(),dataType:"json",success:function(e){e.forEach(function(t,s){var e=i[s];e?e.text?utils.compareVersion(t.version,e.version)>0&&(e.latestVersion=t.version,e.latest=t):i[s]=t:i.push(t)}),function(t){s?chrome.storage.local.set({aiscripts:t}):chrome.storage.local.set({aiscripts2:t})}(i),i.forEach(function(s){s.text=s.text||"",t.aiscripts.push(s),s.text?t.installedScripts.push(s):t.notInstalledScripts.push(s)})}})})},computed:{},methods:{installScript:function(t){aiscripts.enable(aiscript.id,cb)},updateScript:function(t){var s=this;aiscripts.update(this.aiscript.newItem,function(t){t&&t.success&&(s.aiscript.status="updated",chrome.tabs.reload(currentTab.id))})},removeScript:function(t){chrome.runtime.sendMessage({cmd:"REMOVE_SCRIPT",script:t},function(){t.text=""})}}})});