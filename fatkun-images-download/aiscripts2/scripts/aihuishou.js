function aiparser(e){var t=0;function n(n,a){new ParsedPItem({src:n,alt:a},t++,e,function(t){chrome.runtime.sendMessage({cmd:"ADD_IMG",tabId:e.id,item:t})})}location.href.match("www.aihuishou.com")&&(document.querySelector(".product-list-wrapper")?document.querySelectorAll(".product-list-wrapper .img-box img").forEach(function(e){n(e.src,e.closest("a").querySelector("p").textContent)}):document.querySelectorAll("img").forEach(function(e){n(e.src)}))}window.aiparser=aiparser,function(){var e=[];document.querySelectorAll(".product-list-class-wrapper .active").forEach(function(t){e.push(t.textContent)}),e=e.join("/");var t="1";function n(){if(!(r>a)){var c=location.href;1==r?c=c.replace(/-p\d+/,""):c.match(/\?all=True/)?c=c.replace("?all=True","-p"+r+"?all=True"):(c=c.replace(/\?.*/,""),c+="-p"+r),$.ajax({url:c,dataType:"html",success:function(a){var r=[];(new DOMParser).parseFromString(a,"text/html").querySelectorAll(".product-list-wrapper .img-box img").forEach(function(t){r.push({url:t.src,filename:(e+"/"+t.closest("a").querySelector("p").textContent.replace(/\//g,"-")+".jpg").replace(/\s/g,"")})}),chrome.runtime.sendMessage({cmd:"SILENT_DOWNLOAD",imgs:r}),1==t&&setTimeout(n,u)}}),r++}}var a=1,r=1,u=3e3;setTimeout(function(){var e=document.querySelectorAll(".product-list-pager .page");if(e.length>0){$('<div>    <input placeholder="起始页，默认1" id="fatkun-start-page">    <input placeholder="结束页，默认最大页" id="fatkun-end-page">    <input placeholder="翻页间隔，默认3秒" id="fatkun-dl-interval">    <input type="button" id="fatkun-dl-btn" value="下载">    <input type="button" id="fatkun-stop-btn" value="停止"></div>').appendTo("body").css({position:"fixed",top:"50px",right:"50px",zIndex:999999});var c=parseInt(e[e.length-1].textContent);document.getElementById("fatkun-dl-btn").addEventListener("click",function(e){e.target.setAttribute("disabled",!0),r=parseInt(document.getElementById("fatkun-start-page").value||1),a=parseInt(document.getElementById("fatkun-end-page").value||c),n()}),document.getElementById("fatkun-stop-btn").addEventListener("click",function(e){1==t?(e.target.value="继续",t="2"):(e.target.value="停止",t="1",n())}),document.getElementById("fatkun-dl-interval").addEventListener("change",function(e){u=1e3*parseInt(e.target.value)})}},3e3)}();