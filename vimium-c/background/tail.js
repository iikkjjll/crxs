"use strict";r.Ae(200,function(){function t(t){if(p||t.v||(t.v=K.a(t.u)),null==t.textSplit){t.title=n(t.title);var e=t.t,r=i(e);t.t=e.length!==t.u.length?r:"",t.textSplit=s(r,u(r),e.length-r.length,p?U-13-Math.min(t.title.length,40):U)}else t.t===t.u&&(t.t="")}function n(t,n){var i=t.length>U+40;return i&&(t=r.S(t,0,U+39)),e(i?t+"\u2026":t,n||u(t))}function e(t,n){var e,i,u,o,l;if(0===n.length)return r.R(t);for(e="",i=0,u=0;u<n.length;u+=2)l=n[u+1],(o=n[u])>=t.length||(e+=r.R(t.slice(i,o)),e+="<match>",e+=r.R(t.slice(o,l)),e+="</match>",i=l);return e+r.R(t.slice(i))}function i(t){var n=r.Te(t);return!n||n>=t.length?t:t.slice(n,t.length-+(t.endsWith("/")&&!t.endsWith("://")))}function u(t){var n,e,r,i,u,l,s,f,a,c,_,g=[];for(n=0,e=k.length;n<e;n++)for(r=0,i=0,u=void 0,s=(l=t.split(G.Tr[n])).length-1,f=k[n].length;r<s;r++,i=u)u=(i+=l[r].length)+f,g.push([i,u]);if(0===g.length)return g;if(1===g.length)return g[0];for(g.sort(o),a=g[0],n=1,c=1,e=g.length;c<e;c++)a[n]>=(_=g[c])[0]?a[n]<_[1]&&(a[n]=_[1]):(a.push(_[0],_[1]),n+=2);return a}function o(t,n){return t[0]-n[0]}function s(t,n,e,i){var u,o,l,s,f,a="",c=t.length,_=c,g="";if(c<=i||(e>1?_=t.indexOf("/")+1||c:(_=t.indexOf(":"))<0?_=c:r.D.test(t.slice(0,_+3).toLowerCase())?_=t.indexOf("/",_+4)+1||c:_+=22),_<c&&n.length)for(u=n.length,o=c+8;(u-=2)>-4&&o>=_;o=u<0?0:n[u])if(l=u<0?_:n[u+1],(s=o-20-Math.max(l,_))>0&&(c-=s)<=i){_=l+(i-c);break}for(c=0,u=0;c<i&&u<n.length;u+=2)(s=(o=n[u])-20-(f=Math.max(c,_)))>0?(i+=s,g=r.S(t,c,f+11),a+=r.R(g),a+="\u2026",g=r.z(t,o-8,o),a+=r.R(g)):c<o&&(g=t.slice(c,o),a+=r.R(g)),g=t.slice(o,c=n[u+1]),a+="<match>",a+=r.R(g),a+="</match>";return t.length<=i?(g=t.slice(c),a+r.R(g)):(g=r.S(t,c,i-1>c?i-1:c+10),a+r.R(g)+"\u2026")}function a(t){return z.xr(t.t,t.title)}function c(t){var n=(t-z.Rr)/18144e5;return n<0?0:n<1?n*n*.666667:n<1.000165?.666446:0}function _(t,n,e){var r=c(e),i=z.xr(t,n);return r<=i?i:(i+r)/2}function g(t,n){return n}var v=0,S=null,h=false,p=false,B=0,U=0,y=0,b=0,T=0,w=0,k=[""],M="",x="",R="",C="",O=0,D=false,N=false,I="",E="",j=0,F=null,J=true,P=function(t,n,e,r,i,u){this.e=t,this.u=n,this.t=e,this.title=r,this.r=i(this,u),this.visit=0},A=performance,L={Or:[],Dr:[],Nr:null,Er:"",jr:0,Fr:0,Jt:function(t,n){if(0!==k.length&&1&j)2===L.Fr?L.Jr():L.Nr=t;else if(W.Pr([],1),n)return;0===L.Fr&&L.Ar()},Lr:function(t){return 47===t.charCodeAt(0)},Jr:function(){var t,e,r,i,u,l,s,f,a,c,_,m=k.some(L.Lr),v=!!Y.Vr,d=[],S=Y.$r&&Y.$r.Or||L.Or,h=S.length,p=[];for(e=0;e<h;e++)if(z.qr((r=S[e]).t,m?r.Er:r.Kr)&&(J||r.Wr)){if(v&&d.push(r),E&&r.u.length<E.length+2&&E===(r.u.endsWith("/")?r.u.slice(0,-1):r.u))continue;p.push([-z.xr(r.t,r.Kr),e])}for(v&&(Y.Vr.Or=d),T+=t=p.length,t?(p.sort(o),w>0&&!(6&j)?(p=p.slice(w,w+y),w=0):t>w+y&&(p.length=w+y)):j^=1,i=[],u=64&B?-.666446:0,l=0,s=p;l<s.length;l++)a=(f=s[l])[0],u&&(a=a<u?a:(a+u)/2),c=new P("bookm",(r=S[e=f[1]]).u,r.t,m?r.Er:r.Kr,g,-a),_=32&B&&X.Qr?X.zr(r.u):-1,c.visit=_<0?0:X.Gr[_].Hr,i.push(c),null!==r.Xr&&(c.u=r.Xr,c.title=n(m?r.Er:r.Kr),c.textSplit="javascript: \u2026",c.t=r.Zr);W.Pr(i,1)},Yr:function(){var t=chrome.bookmarks;t.onCreated.addListener(L.ti),t.onRemoved.addListener(L.ni),t.onChanged.addListener(L.ni),t.onMoved.addListener(L.ti),t.onImportBegan.addListener(function(){chrome.bookmarks.onCreated.removeListener(L.ti)}),t.onImportEnded.addListener(function(){var t=L.ti;chrome.bookmarks.onCreated.addListener(t),t()})},Ar:function(){L.Fr=1,L.Ur&&(clearTimeout(L.Ur),L.Ur=0),chrome.bookmarks.getTree(L.ei)},ei:function(t){L.Fr=2,L.Or=[],L.Dr=[],Y.Kt(2),t.forEach(L.ri,L);var n=L.Nr;if(L.Nr=null,setTimeout(function(){return nt.ii(L.Or)},50),L.Yr&&(setTimeout(L.Yr,0),L.Yr=null),n&&!n.o)return L.Jr()},ri:function(t){var n,e,i,u=t.title,o=t.id,l=L.Er+"/"+(u||o);if(t.children)return L.Dr.push(o),n=L.Er,2<++L.jr&&(L.Er=l),t.children.forEach(L.ri,L),--L.jr,void(L.Er=n);i=(e=t.url).startsWith("javascript:"),L.Or.push({ui:o,Er:l,Kr:u||o,t:i?"javascript:":e,Wr:F?Z.oi(e,u):1,u:i?"javascript:":e,Xr:i?e:null,Zr:i?r.Q(e):null})},Ur:0,li:0,si:false,fi:function(){var t=A.now()-L.li;0===L.Fr&&(t>=6e4||t<-5e3?(L.Ur=L.li=0,L.si=false,L.Ar()):(L.Or=[],L.Dr=[],L.Ur=setTimeout(L.fi,3e4),Y.Kt(2)))},ti:function(){L.li=A.now(),L.Fr<2||(L.Ur=setTimeout(L.fi,6e4),L.Fr=0)},ni:function(t,n){for(var e,r,i,u,o,l,s,f=L.Or,a=f.length,c=n&&n.title,_=0;_<a&&f[_].ui!==t;_++);if(_<a)return r=(e=f[_]).u,i=n&&n.url,nt.ai&&(null==c?r!==e.t||!n:null!=i&&r!==i)&&nt.ci.has(r)&&X.Qr&&X.zr(r)<0&&nt.ci.delete(r),void(null!=c?(e.Er=e.Er.slice(0,-e.Kr.length)+(c||e.ui),e.Kr=c||e.ui,i&&(e.u=i,e.t=nt._i(i,e),nt.gi()),F&&(e.Wr=Z.oi(e.u,e.Kr))):(f.splice(_,1),n||L.ti()));if(!(L.Dr.indexOf(t)<0)){if(null!=c)return L.ti();if(!L.si&&nt.ai){for(u=nt.ci,o=X.zr,l=0,s=X.Qr?f:[];l<s.length;l++)u.has(r=s[l].u)&&o(r)<0&&u.delete(r);L.si=true}return L.ti()}}},V={Jt:function(t,n){var e,r,i,u,o,l;if(!k.length&&1024&B||!(2&j))return W.Pr([],2);if(r=k.length>0,e=X.Gr){if(r)return W.Pr(V.mi(e),2);(X.vi>10||X.di>0)&&X.Si()}else if(i=r?function(n){if(!t.o)return W.Pr(V.mi(n),2)}:null,r&&(p||X.hi)?(X.hi>0&&clearTimeout(X.hi),X.hi=0,X.pi(i)):(X.hi||(X.hi=setTimeout(function(){X.hi=0,X.pi(i)},r?200:150)),r&&W.Bi((l=(o=(u=W.Ui).length)>0)&&"search"===u[0].t?[u[0]]:[],h&&l,0,0,o,x,O)),r)return;h=false,0===n?W.yi(V.bi,t):chrome.sessions?chrome.sessions.getRecentlyClosed(V.Ti.bind(V,t)):V.wi([],t,new Set,0,0)},mi:function(t){var n,e,i,u,o=1===k.length?k[0]:"",l=o&&("."===o[0]?/^\.[\da-zA-Z]+$/.test(o):(r.V(o,null,-2),r.B<=2)),s=l?"."===o[0]||r.B>0?G.Tr[0]:(G.ki||G.Mi(),G.ki[0]):null,f=!(Y.$r&&Y.$r.Gr),a=Y.Vr?[]:null,m=[-1.1,-1.1],v=[],d=z.qr,S=l&&o.includes("%")&&!/[^\x21-\x7e]|%[^A-F\da-f]/.test(o),h=y+w,p=-1.1,B=0,U=0,b=0;for(I&&h++,U=h;--U;)m.push(-1.1,-1.1);for(h=2*h-2,f||(t=Y.$r.Gr),n=t.length;B<n;B++)if(e=t[B],(l?s.test(S?e.u:e.t):d(e.t,e.Kr))&&(J||e.Wr)&&(a&&a.push(e),b++,(i=l?c(e.Hr)||1e-16*Math.max(0,e.Hr):_(e.t,e.Kr,e.Hr))>p)){for(U=h-2;0<=U&&m[U]<i;U-=2)m[U+2]=m[U],m[U+3]=m[U+1];m[U+2]=i,m[U+3]=B,p=m[h]}for(a&&(Y.Vr.Gr=a),T+=b,b||(j^=2),5&j?B=0:(B=2*w,w=0);B<=h&&!((i=m[B])<=0);B+=2)(e=t[m[B+1]]).u!==I&&((u=new P("history",e.u,S?e.u:e.t,e.Kr,g,i)).visit=e.Hr,v.push(u));return nt.gi(),v},bi:function(t,n){var e,r,i,u,o,l;if(Y.xi(n),!t.o){for(e=new Set,r=0,i=0,u=n;i<u.length;i++)(o=u[i]).incognito&&S||e.has(l=o.url||o.pendingUrl)||(e.add(l),r++);return V.wi([],t,e,w,r)}},Ti:function(t,n){var e,r,i;if(!t.o)return e=[],r=new Set,i=-w,n.some(function(t){var n,u,o,l=t.tab;return!!l&&((n=l.url).length>2e3&&(l.url=n=X.Ri(n,l)),!(!J&&!Z.oi(n,l.title))&&!r.has(u=n+"\n"+l.title)&&(r.add(u),r.add(n),++i>0&&e.push({u:l.url,Kr:l.title,Ci:(o=t.lastModified,o<3e11&&o>-4e10?1e3*o:o),Oi:l.sessionId}),e.length>=y))})?V.Di(e):V.wi(e,t,r,-i,0)},wi:function(t,n,e,r,i){chrome.history.search({text:"",maxResults:w+y*(J?1:2)+i},function(i){if(!n.o){i=i.filter(function(t){var n=t.url;return n.length>2e3&&(t.url=n=X.Ri(n,t)),!e.has(n)&&(J||0!==Z.oi(t.url,t.title||""))}),r<0?i.length=Math.min(i.length,y-t.length):r>0&&(i=i.slice(r,r+y));var u=i.map(function(t){return{u:t.url,Kr:t.title,Ci:t.lastVisitTime,Oi:null}});r<0&&(u=t.concat(u)),V.Di(u)}})},Di:function(t){t.forEach(V.Ni),w=0,nt.gi(),W.Pr(t,2)},Ni:function(t,n,e){var r=t.u,i=new P("history",r,nt._i(r,r),t.Kr||"",g,(99-n)/100),u=t.Oi;i.visit=t.Ci,u&&(i.s=u,i.label='<span class="undo">&#8630;</span>'),e[n]=i}},$={Jt:function(t,n){if(1!==k.length||!(16&j)||k[0].lastIndexOf("/",k[0].length-2)>=0)return W.Pr([],16);if(X.M);else{if(!X.Gr)return n>0?W.Pr([],16):X.pi(function(){if(!t.o)return $.Jt(t,0)});$.Ar(X.Gr)}return $.Jr()},Jr:function(){var t,n,e,i,u,o,l,s,f,a,c,g,m,v,d,S=r.M,p=z.Ii,B=16===j&&h?[]:null,U=k[0].replace("/","").toLowerCase(),b=U===k[0],M=[],x="",R=-1.1;for(z.Ii=3,i=S.keys(),u=void 0;!(u=i.next()).done;)(n=u.value).includes(U)&&(t=S.get(n),(J||t.Ei>0)&&(e=_(n,"",t.Hr),B?B.push({r:e,d:n,m:t}):e>R&&(R=e,x=n)));if(o=x.length===U.length,x&&!o&&(x.startsWith("www.")||x.startsWith(U)||(l=x.slice(x.indexOf(".")+1)).includes(U)&&(s=void 0,(s=S.get(l="www."+l))?(J||s.Ei>0)&&(x=l,t=s):(s=S.get(l="m."+l))&&(J||s.Ei>0)&&(J||s.Ei>0)&&(x=l,t=s)),(f=x.startsWith(U)?0:x.startsWith("www."+U)?4:-1)>=0&&(m=(c=(a=r.oe(x))[0]).length-1,(g=a[1])>1&&(!(f=x.length-f-U.length-c[m].length-1)||3===g&&f===c[m-1].length+1)&&(o=true))),x)T++,h=!w&&o||h,M=$.ji(x,t,0,b);else if(B)for(B.sort($.Fi),(T=B.length)>w+y&&(B.length=w+y),v=0,d=B;v<d.length;v++)M.push($.ji((m=d[v]).d,m.m,m.r,b)[0]);z.Ii=p,W.Pr(M,16)},ji:function(e,r,i,u){var o,l,s,f,a,c,_,m,v=r.ne>0,d="";return 2===L.Fr&&(o=new RegExp("^https?://"+e.replace(H,"\\$&")+"/?$"),(l=L.Or.filter(function(t){return o.test(t.u)&&(J||t.Wr)})).length>0&&(s=l.filter(function(t){return"s"===t.u[4]}),E=(f=(l=(v=s.length>0)?s:l)[0].u).endsWith("/")?f.slice(0,-1):f,d=l[0].Kr)),a=(v?"https://":"http://")+e+"/",!i&&(I=a,w>0)?(w--,[]):(c=new P("domain",a,u?e:e+"/","",g,i||2),m=(_=X.Qr?X.zr(a):-1)>0?X.Gr[_]:null,t(c),m&&(J||m.Wr)&&(c.visit=m.Hr,d=d||m.Kr),c.title=n(d,[]),--y,[c])},Ar:function(t){var n,e,i,u,o,l,s,f,a,c,_;for($.Ar=null,n=$.Ji,e=X.M=r.M,i=0,u=t;i<u.length;i++)l=(o=u[i]).Hr,s=o.Wr,(f=n(o.u))&&(c=f.Pi,(_=e.get(a=f.Ai))?(_.Hr<l&&(_.Hr=l),_.Ei+=s,c>=7&&(_.ne=8===c?1:0)):e.set(a,{Hr:l,Ei:s,ne:8===c?1:0}))},Ji:function(t){var n,e,r=t.lastIndexOf(":",5),i=r>0?t.slice(0,r):"";if("http"===i)n=7;else if("https"===i)n=8;else{if("ftp"!==i)return null;n=6}return e=t.indexOf("/",n),{Ai:"__proto__"!==(t=t.slice(n,e<0?t.length:e))?t:".__proto__",Pi:n}},Fi:function(t,n){return n.r-t.r}},q={Jt:function(t,n){!(4&j)||n&&(!k.length||256&B)?W.Pr([],4):W.yi(q.Jr,t)},Jr:function(t,n){var e,i,u,o,s,c,_,g,v,d,h,U,M,x,R,C,O,D,I,E,F,J,A,L,V,$,K,Q,H,G,X,Z,tt,et,rt,it,ut,ot,lt,st,ft,at;if(Y.xi(n),!t.o){if(e=m.gt,i=k.length<=0,u=3&j,s=[],(o=!!(8&B)&&N&&i&&!p)&&!(128&B)&&n.length>w&&n.length>b){for(c=new Map,_=0,g=n;_<g.length;_++)c.set((v=g[_]).id,v);for(M=(U=(h=(d=c.get(e))?d.openerTabId:0)?c.get(h):null)?U.index:d?d.index-1:0,x=U?0:b/2|0;1<--x&&M>0&&n[M-1].openerTabId===h;M--);n=M>0?n.slice(M).concat(n.slice(0,M)):n}for(R=[],C=[],O=0,D=n;O<D.length;O++)v=D[O],!N&&S&&v.incognito||(I=v.url||v.pendingUrl,E=v.text||(v.text=nt._i(I,v.incognito?"":I)),(i||z.qr(E,v.title))&&(F=v.windowId,!N&&C.lastIndexOf(F)<0&&C.push(F),R.push(v)));if(u&&1===R.length&&R[0].id===m.gt&&(R.length=0),T+=J=R.length,J||(j^=4),w>=J&&!u)return w=0,W.Pr(s,4);if(C.sort(q.Li),A=i?o?q.Vi:q.$i:a,L=o?r.L():null,V=C.length>1?m.ut:0,o)for($=0,K=R;$<K.length;$++)L[(v=K[$]).id]=(H=(Q=v.openerTabId)&&L[Q])?H<5?H+1:5:1;for(G=32&B?1===l.Xe.o?0:f<62?Date.now()-performance.now():performance.timeOrigin:0,X=0;X<R.length;)Z=(v=R[X++]).id,tt=o?L[Z]:1,I=v.url||v.pendingUrl,et=m.Ft.get(Z),rt=new P("tab",I,v.text,v.title,A,o?X:Z),it=V&&v.windowId!==V?C.indexOf(v.windowId)+1+":":"",ut="",it+=X,e===Z?(o||(rt.r=i?1<<31:0),it="("+it+")"):et||(it="**"+it+"**"),!S&&v.incognito&&(ut+="*"),v.discarded&&(ut+="~"),rt.visit=et?et.t+G:0,rt.s=Z,rt.label="#"+it+(ut&&" "+ut),tt>1&&(rt.level=" level-"+tt),s.push(rt);if(s.sort(W.qi),lt=w+y-(ot=s.length),u||lt<0||!i)for(w>0&&!u?(s=s.slice(w,w+y),ot=y,w=0):ot>w+y&&(s.length=ot=w+y),x=u?0:ot;x<ot;x++)s[x].r*=8/(x/4+1);else if(w>0){for(ft=0,at=st=s.slice(0,lt);ft<at.length;ft++)at[ft].label+="[r]";for(ot=(s=s.slice(w).concat(st)).length,x=0;x<ot;x++)s[x].r=ot-x;w=0}nt.gi(),W.Pr(s,4)}},Li:function(t,n){return t-n},$i:function(t,n){var e=m.Ft.get(n);return e?e.i:4&B?2047+n:-n},Vi:function(t,n){return 1/n}},K={ue:0,Jt:r.b,Ki:function(t,n){var e,i,u,o,s,f,a,c,_,g;if(!(8&j))return W.Pr([],8);if(u=(i=k).length>0?i[0]:"",0===i.length);else{if(true!==n&&"\\"===u[0]&&"\\"!==u[1])return u.length>1?i[0]=u.slice(1):i.shift(),u=R.slice(1).trimLeft(),J=!F||J||Z.Wi([u]),w?(w--,W.Pr([],8)):(e=K.Qi(u),W.Pr([e],8));o=l.ce.searchEngineMap.get(u)}if(true===n){if(!o)return true}else{if(!o&&!u.startsWith("vimium://"))return 0===v&&i.length<=1&&(v=i.length?K.zi():-1),W.Pr([],8);o&&C&&(i.push(C),w=0,R+=" "+C,C="",O&=-5),i.length>1||(v=-1)}if(i.length>1&&o?(i.shift(),R.length>200&&(i=R.split(" ")).shift()):o&&(i=[]),J=!F||J&&Z.Wi([u]),o?(a=s=(c=r.ke(i,o.ye,o.b,[])).ye,f=c.xe):(a=s=i.join(" "),f=[]),"~"===u);else if(s.startsWith("vimium://")){if(_=r.K(s.slice(9),1,true),g=K.Hi.bind(K,i,s,a,o,f),_ instanceof Promise)return _.then(K.Gi.bind(K,t,g));if(_ instanceof Array)return K.Gi(t,g,_);_&&(s=a=_,f=[])}else s=r.V(s,null,-2);return e=K.Hi(i,s,a,o,f),W.Pr([e],8)},Gi:function(t,n,e){var i,u,o,l,s;if(!t.o){switch(e[1]){case 5:case 6:if(v=6===e[1]&&k.length>1?v:-1,!(u=e[0]))break;return C="",(k=((R="\\ "+u).length<201?R:r.S(R,0,200).trim()).split(" ")).length>1&&(k[1]=r.Se(k[1],k.length>2)),K.Ki(t);case 2:if(k=(o=e[0]).length>1||1===o.length&&o[0]?o:k,(l=K.ue++)>12)break;if(s=K.Ki(t,true),l<=0&&(K.ue=0),true!==s)return s;break;case 0:e[0]&&(i=K.Xi(n(),e))}W.Pr(i||[n()],8)}},Hi:function(t,u,o,l,s){var f=new P("search",u,o,(l?l.Pe+": ":"")+t.join(" "),g,9);return t.length>0&&l?(f.t=K.Zi(o,s),f.title=n(f.title,[l.Pe.length+2,f.title.length]),f.textSplit=e(f.t,s)):(f.t=r.Q(i(o)),f.title=n(f.title,[]),f.textSplit=r.R(f.t)),p||(f.v=l&&l.b||K.a(u)),f.p=l?l.Pe:"",f},Xi:function(t,e){var i=e[0],u=new P("math","vimium://copy "+i,i,i,g,9);return--u.r,u.title='<match style="text-decoration: none;">'+n(u.title,[])+"<match>",u.textSplit=r.R(e[2]),[t,u]},a:function(t){for(var n=X.Qr&&t.startsWith("http")?X.zr(t):-1,e=n<0?~n-1:n,r=e<0?[]:X.Gr,i=t.indexOf(":")+3,u=0,o=0,l="",s="",f=0,a=0;u<=e&&(i="/"===t[i]?i+1:t.indexOf("/",i+1)+(o?0:1))>0;o=i){for(l=t.slice(o,i),a=e;u<=a;)if((s=r[f=u+a>>>1].u.slice(o))>l)a=f-1;else{if(s===l)return o?r[f].u:"";u=f+1}if(u<=e&&o&&"/"===(l=r[u].u)[i]&&l.length<=++i)return l}return""},Yi:0,mr:0,zi:function(){var t=k[0],n=l.ce.searchKeywords;return null==n?(K.mr=K.mr||setTimeout(K.tu,67),-2):t.length>=K.Yi?0:n.includes("\n"+t)?-2:0},Zi:function(t,n){var e,i,u,o=n.length;if(i=r.Q(n.length>0?t.slice(0,n[0]):t),(e=r.Te(i))&&(i=i.slice(e),e=0),n.length<=0)return i;for(u=n[0];n[e]=i.length,o>++e;)i+=r.Q(t.slice(u,n[e])),u=n[e];return u<t.length&&(i+=r.Q(t.slice(u))),i},Qi:function(t){var e=r.V(t,null,-2),u=4===r.B,o=new P("search",e,r.Q(i(e)),"",g,9);return o.title=u?"~: "+n(t,[0,t.length]):n(t,[]),o.textSplit=r.R(o.t),p||(o.v=K.a(e)),o.p=u?"~":"",o.n=1,o},tu:function(){var t,n,e,i=r.h(l.ce.searchEngineMap).sort(),u=0,o="",s=[];for(t=i.length;0<=--t;)o.startsWith(n=i[t])||(u=(e=n.length)>u?e:u,o=n,s.push(n));l.sn("searchKeywords","\n"+s.join("\n")),K.Yi=u,K.mr=0}},W={nu:0,eu:0,Ui:null,ru:null,Bi:null,Jt:function(t){var n,e,r,i;if(W.ru&&(W.ru.o=true),n=W.ru={o:false},W.eu=0,e=1,r=-9&(j&=t[0])?t.length:2,W.Ui=[],W.nu=r-1,v=w&&-1,t[1]===K){if(i=K.Ki(n),r<3)return;if(i)return void i.then(W.iu.bind(null,t,n,e));e=2}W.iu(t,n,e)},iu:function(t,n,e){for(z.Rr=Date.now()-18144e5,z.Ii=3*k.length||.01,k.indexOf("__proto__")>=0&&(k=k.join(" ").replace(/(^| )__proto__(?=$| )/g," __proto_").trimLeft().split(" ")),Y.Ir(),k.sort(W.uu),G.ou();e<t.length;e++)t[e].Jt(n,e-1)},uu:function(t,n){return n.length-t.length||(t<n?-1:t===n?0:1)},yi:function(t,n,e){var r,i=m.ft;null===S&&(i=1!==i?i:f>=52||l.C.qn||!!Y.Ft.Ft?m.ft=0:1),1!==i?(Y.Ft.lu!==(r=((S=2!==i)?2:0)|(N?1:0))&&(Y.Ft={Ft:null,lu:r}),(e=e||Y.Ft.Ft)?t(n,e):chrome.tabs.query(N?{currentWindow:true}:{},t.bind(null,n))):chrome.windows.getCurrent({populate:N},function(e){m.ft=S?0:2,n.o||W.yi(t,n,N?e.tabs:null)})},Pr:function(t,n){var e=W.Ui,r=t.length;if(r>0&&(W.eu|=n,W.Ui=0===e.length?t:e.concat(t),8===n&&(h=!0,y-=r,T+=r)),0==--W.nu)return e=null,W.su()},su:function(){var n,e,r,u,o,l,s,f,a,c,_,g,m=W.Ui;return W.Ui=null,m.sort(W.qi),w>0?(m=m.slice(w,w+b),w=0):m.length>b&&(m.length=b),G.fu=G.ki=null,k.length>0&&(e=i(n=k[0]),((r=n.length!==e.length)||n.endsWith("/")&&n.length>1&&!n.endsWith("//"))&&(k[0]=r?e:n.slice(0,-1),G.au())),m.forEach(t),u=m.length>0,o=h&&u,l=T,s=":"===M,a=x,c=O,_=2!=(f=v<0?-2!==v||u||s?0:3:J?k.length<=0||D?0:u?2:s?0:1:0)||s?0:W.eu,g=W.Bi,W.cu(),g(m,o,f,_,l,a,c)},cu:function(){W.ru=W.Bi=S=null,k=[],M=x=R=C=I=E="",G.Tr=null,z.Ii=3,z.Rr=v=W.eu=B=y=b=T=U=0,j=0,O=0,h=p=false,D=N=false,J=true},_u:function(){var t,n,e=R;if(w=0,C="",!(0===e.length||(t=(e=e.slice(-5)).lastIndexOf("+"))<0||0!==t&&32!==e.charCodeAt(t-1))){if(e=e.slice(t),t=R.length-e.length,(n=parseInt(e,10))>=0&&"+"+n===e&&n<=(t>0?100:200))w=n;else if("+"!==e)return;R=R.slice(0,t&&t-1),C=e,O|=4}},qi:function(t,n){return n.r-t.r}},Q={__proto__:null,bookm:[1,L],domain:[16,$],history:[2,V],omni:[63,K,$,V,L,q],search:[8,K],tab:[4,q]},z={qr:function(t,n){var e,r,i=G.Tr;for(e=0,r=k.length;e<r;e++)if(!(i[e].test(t)||i[e].test(n)))return false;return true},Ii:3,gu:[0,0],mu:function(t,n){var e,r=0;return(e=n.split(G.Tr[t]).length)<1?z.gu:(r=1,G.ki[t].test(n)&&(r+=1,G.fu[t].test(n)&&(r+=1)),[r,(e-1)*k[t].length])},xr:function(t,n){var e,r,i,u=0,o=0,l=0,s=0,f=!!n;for(G.ki||G.Mi(),e=0,r=k.length;e<r;e++)s+=(i=z.mu(e,t))[0],l+=i[1],f&&(o+=(i=z.mu(e,n))[0],u+=i[1]);return s=s/z.Ii*z.vu(l,t.length),0===u?n?s/2:s:s<(o=o/z.Ii*z.vu(u,n.length))?o:(s+o)/2},Rr:0,vu:function(t,n){return t<n?t/n:n/t}},H=/[$()*+.?\[\\\]\^{|}]/g,G={Tr:null,ki:null,fu:null,ou:function(){var t,n,e,r=G.Tr=[];for(G.ki=G.fu=null,t=0,n=k;t<n.length;t++)e=n[t],r.push(new RegExp(e.replace(H,"\\$&"),e!==e.toUpperCase()&&e.toLowerCase()===e?"i":""))},Mi:function(){var t,n,e,r,i,u=G.ki=[],o=G.fu=[];for(t=0,n=G.Tr;t<n.length;t++)r="\\b"+(e=n[t]).source,i=e.flags,u.push(new RegExp(r,i)),o.push(new RegExp(r+"\\b",i))},au:function(){G.Tr&&(G.Tr[0]=new RegExp(k[0].replace(H,"\\$&"),G.Tr[0].flags))}},X={du:0,vi:0,di:0,Qr:false,hi:0,Gr:null,Su:null,M:null,pi:function(t){X.Su?t&&X.Su.push(t):(X.Su=t?[t]:[],X.du=Date.now(),X.hi||chrome.history.search({text:"",maxResults:2e4,startTime:0},function(t){setTimeout(X.hu,0,t)}))},hu:function(t){var n,e,r,i,u,o,l;for(X.hu=null,n=0,e=t.length;n<e;n++)(i=(r=t[n]).url).length>2e3&&(i=X.Ri(i,r)),t[n]={t:i,Kr:r.title,Hr:r.lastVisitTime,Wr:1,u:i};if(F)for(u=0,o=t;u<o.length;u++)0===Z.oi((l=o[u]).t,l.Kr)&&(l.Wr=0);setTimeout(function(){setTimeout(function(){var t,n,e,r,i,u,o,l,s=X.Gr;for(t=s.length-1;0<t;)for(i=(r=(n=s[t]).t=nt._i(e=n.u,n)).length>=e.length;0<=--t&&!((o=(u=s[t]).u).length>=e.length)&&e.startsWith(o);)u.u=e.slice(0,o.length),l=i?o:nt._i(o,u),u.t=i||l.length<o.length?r.slice(0,l.length):l;X.M||setTimeout(function(){$.Ar&&$.Ar(X.Gr)},200)},100),X.Gr.sort(function(t,n){return t.u>n.u?1:-1}),X.Qr=true,chrome.history.onVisitRemoved.addListener(X.pu),chrome.history.onVisited.addListener(X.Bu)},100),X.Gr=t,X.pi=function(t){t&&t(X.Gr)},X.Su&&X.Su.length>0&&setTimeout(function(t){var n,e;for(n=0,e=t;n<e.length;n++)(0,e[n])(X.Gr)},1,X.Su),X.Su=null},Bu:function(t){var n,e,r,i,u,o,l,s,f,a=t.url;if(a.length>2e3&&(a=X.Ri(a,t)),n=t.lastVisitTime,e=t.title,r=++X.vi,i=X.M,(u=X.zr(a))<0&&X.di++,(r>59||r>10&&Date.now()-X.du>3e5)&&X.Si(),o=u>=0?X.Gr[u]:{t:"",Kr:e,Hr:n,Wr:F?Z.oi(a,e):1,u:a},i&&(s=$.Ji(a))&&((l=i.get(s.Ai))?(l.Hr=n,u<0&&(l.Ei+=o.Wr),s.Pi>=7&&(l.ne=8===s.Pi?1:0)):i.set(s.Ai,{Hr:n,Ei:o.Wr,ne:8===s.Pi?1:0})),u>=0)return o.Hr=n,void(e&&e!==o.Kr&&(o.Kr=e,Y.mr&&Y.Kt(1),F&&(f=Z.oi(a,e),o.Wr!==f&&(o.Wr=f,l&&(l.Ei+=f||-1)))));o.t=nt._i(a,o),X.Gr.splice(~u,0,o),Y.mr&&Y.Kt(1)},pu:function(t){var n,e,i,u,o,l,s,f,a,c,_,g,m;if(nt.Uu.length=0,n=nt.ci,Y.Kt(1),t.allHistory){for(X.Gr=[],X.M&&(X.M=r.M=new Map),e=new Map,i=0,u=L.Or;i<u.length;i++)n.delete((o=u[i]).u);nt.ci=e}else for(l=X.zr,s=X.Gr,f=X.M,c=0,_=t.urls;c<_.length;c++)(o=l(g=_[c]))>=0&&(f&&s[o].Wr&&(m=$.Ji(g))&&(a=f.get(m.Ai))&&--a.Ei<=0&&f.delete(m.Ai),s.splice(o,1),n.delete(g))},Ri:function(t,n){var e=t.lastIndexOf(":",9),i=e>0&&"://"===t.substr(e,3),u=n.title;return t=t.slice(0,(i?t.indexOf("/",e+4):e)+320)+"\u2026",u&&u.length>160&&(n.title=r.S(u,0,160)),t},Si:function(){var t=Date.now();if(X.di<=0);else{if(t<X.du+1e3&&t>=X.du)return;setTimeout(chrome.history.search,50,{text:"",maxResults:Math.min(999,X.vi+10),startTime:t<X.du?t-3e5:X.du},X.yu)}return X.du=t,X.di=X.vi=0,nt.gi()},yu:function(t){var n,e,r,i,u,o,l=X.Gr,s=X.zr;if(!(l.length<=0))for(n=0,e=t;n<e.length;n++){if((i=(r=e[n]).url).length>2e3&&(r.url=i=X.Ri(i,r)),(u=s(i))<0)X.di--;else if(!(o=r.title)||o===l[u].Kr)continue;X.vi--,X.Bu(r)}},zr:function(t){for(var n="",e=X.Gr,r=e.length-1,i=0,u=0;i<=r;)if((n=e[u=i+r>>>1].u)>t)r=u-1;else{if(n===t)return u;i=u+1}return~i}},Z={oi:function(t,n){var e,r,i;for(e=0,r=F;e<r.length;e++)if(n.includes(i=r[e])||t.includes(i))return 0;return 1},Wi:function(t){var n,e,r,i,u,o;if(F)for(n=0,e=t;n<e.length;n++)for(r=e[n],i=0,u=F;i<u.length;i++)if(o=(o=u[i]).trim(),r.includes(o)||o.length>9&&r.length+2>=o.length&&o.includes(r))return true;return false},bu:function(){var t,n,e,r,i,u,o,l,s;if(L.Or)for(t=0,n=L.Or;t<n.length;t++)(e=n[t]).Wr=F?Z.oi(e.t,e.Er):1;if(X.Gr)for(r=X.M,i=0,u=X.Gr;i<u.length;i++)e=u[i],o=F?Z.oi(e.t,e.Kr):1,e.Wr!==o&&(e.Wr=o,r&&(l=$.Ji(e.u))&&(s=r.get(l.Ai))&&(s.Ei+=o||-1))},Tu:function(t){var n,e,r,i=[];for(n=0,e=t.split("\n");n<e.length;n++)(r=e[n]).trim()&&"#"!==r[0]&&i.push(r);F=i.length>0?i:null,(X.Gr||L.Or)&&setTimeout(Z.bu,100)}},Y={$r:null,Vr:null,Ft:{Ft:null,lu:0},wu:[],mr:0,ku:0,Ir:function(){var t,n,e,r,i,u=k,o=null,s=0,f=u.join(" ");for(t=Y.wu,n=f?t.length:0;0<=--n;)if(t[n].Mu||!J){for(e=t[n].Tt,r=0,i=0;r<e.length&&i<u.length;i++)u[i].includes(e[r])&&r++;if(r>=e.length){o=t[n];break}}Y.$r=o,o&&(l.en.t<200||!o.Gr||o.Gr.length>1e3)&&(s=A.now())-o.Hr<Math.max(300,1.3*l.en.t)?(Y.Vr=o,o.Tt=u.slice(0)):!f||o&&f===o.Tt.join(" ")||!(f.length>4||/\w\S|[^\x00-\x80]/.test(f))?Y.Vr=null:(Y.Vr={Tt:u.slice(0),Mu:J,Hr:s||A.now(),Gr:o&&o.Gr,Or:o&&o.Or},Y.wu.push(Y.Vr),Y.mr||(Y.mr=setInterval(Y.xu,6e3)))},xu:function(){for(var t=Y.wu,n=-1,e=A.now()-5983;++n<t.length&&t[n].Hr<e;);++n<t.length?t.splice(0,n):(t.length=0,clearInterval(Y.mr),Y.mr=0)},Kt:function(t){var n,e,r;for(n=0,e=Y.wu;n<e.length;n++)r=e[n],t<2?r.Gr=null:t<3?r.Or=null:Y.Ft.Ft=null},xi:function(t){Y.Ft.Ft!==t&&(Y.ku&&(clearTimeout(Y.ku),Y.ku=0),Y.Ft.Ft=t,t&&(Y.ku=setTimeout(Y.xi,3e3,null)))}},tt=decodeURIComponent,nt={_i:function(t,n){if(t.length>=400||t.lastIndexOf("%")<0)return t;try{return tt(t)}catch(t){}return nt.ci.get(t)||(n&&nt.Uu.push(n),t)},ii:function(t){for(var n,e,r=nt.ci,i=nt.Uu,u=-1,o=t.length;;)try{for(;++u<o;)(n=t[u]).t=(e=n.u).length>=400||e.lastIndexOf("%")<0?e:tt(e);break}catch(t){n.t=r.get(e)||(i.push(n),e)}nt.gi()},ci:new Map,Uu:[],Ru:-1,gi:function(){0!==nt.Uu.length&&-1===nt.Ru&&(nt.Ru=0,setTimeout(nt.Cu,17,null))},Cu:function(t){for(var n,e,r,i,u,o,l;nt.Ru<nt.Uu.length;nt.Ru++){if(!(n=nt.ci.get(i=(r="string"==typeof(e=nt.Uu[nt.Ru]))?e:e.u)))return t||(t=nt.Ou())?(l=(o=(u=f>=66?i.split("#",3):[]).length)<2?i:o<3?u[0]+"%23"+u[1]:i.replace(/#/g,"%23"),t.open("GET",nt.Du+l,true),t.send()):(nt.Uu.length=0,void(nt.Ru=-1));r||(e.t=n)}},Nu:function(){if(!(nt.Ru<0)){var t=this.responseText,n=nt.Uu[nt.Ru++];"string"!=typeof n?nt.ci.set(n.u,n.t=t):nt.ci.set(n,t),nt.Ru<nt.Uu.length?nt.Cu(this):(nt.Uu.length=0,nt.Ru=-1)}},ai:true,Du:"1",Ou:function(){if(!nt.Du)return null;var t=new XMLHttpRequest;return t.responseType="text",t.onload=nt.Nu,t},Iu:function(t){var n=!!t&&!(t=t.toLowerCase()).startsWith("utf"),e=n?"data:text/plain;charset="+t+",":"",i=nt.Du;e!==i&&(nt.Du=e,n?"1"!==i&&setTimeout(function(){return X.Gr&&nt.ii(X.Gr),nt.ii(L.Or)},100):(nt.ci.clear(),nt.Uu.length=0),nt.ai!==n&&(nt.Uu=n?[]:{length:0,push:r.b},nt.ai=n,nt.Ru=-1))}};d={Jt:function(t,n,e){var i,u,o,l,s;h=false,M=R=(t=t.trim())&&t.replace(r.O," "),x="",O=0,W._u(),k=(t=R)?(t=t.length<201?t:r.S(t,0,200).trimRight()).split(" "):[],(U=0|n.c||128)&&(U-=t.replace(/[\u2e80-\u2eff\u2f00-\u2fdf\u3000-\u303f\u31c0-\u31ef\u3200-\u9fbf\uf900-\ufaff\ufe30-\ufe4f\uff00-\uffef]/g,"aa").length-t.length),U=Math.max(50,Math.min(U,320)),p=!!(1&(B=n.f)),b=y=Math.min(Math.max(3,0|n.r||10),25),T=0,W.Bi=e,i="bomni"===n.o?(B|=64,Q.omni):Q[n.o],o=n.t||63,l=n.e||63,i===Q.tab&&(N=!!(2&B)),h=null!=i&&1===i.length,2===(u=k.length>=1?k[0]:"").length&&":"===u[0]&&(i="b"===(u=u[1])?Q.bookm:"h"===u?Q.history:"t"===u||"w"===u||"W"===u?(N="t"!==u,B|=0,Q.tab):"B"===u?(B|=64,Q.omni):"H"===u?(B|=256,Q.omni):"d"===u?Q.domain:"s"===u?Q.search:"o"===u?Q.omni:null)&&(h=2===i.length,x=k.shift(),O|=1,R=R.slice(3),l=i[0]),k.length>0&&((u=k[0]).includes("\u3002")||u.includes("\uff1a"))&&(D=k.length<2,(s=r.Se(u,D))!==u?(k[0]=s,R=s+R.slice(u.length),D=D&&!/^[.\u3002](\w+[.\u3002]?)*$/.test(u)):D=D&&u.includes("\uff1a")&&!/\uff1a([^\/\d]|\d[^\0-\xff])/.test(u)),J=!F||Z.Wi(k),j=o&l,R&&(O|=2),W.Jt(i||Q.omni)},Xt:function(t,n,e){switch(n){case"tab":chrome.tabs.remove(+t,function(){var t=r.x();return t||Y.xi(null),e(!t),t});break;case"history":var i=!X.Qr||X.zr(t)>=0;chrome.history.deleteUrl({url:t}),i&&Y.Kt(1),e(i)}},Mr:function(){Y.Ft.Ft&&(1&Y.Ft.lu||!(2&Y.Ft.lu)!=(2===m.ft))&&Y.xi(null)},Eu:Z.Wi},l.mn.omniBlockList=Z.Tu,l.pn("omniBlockList"),l.mn.localeEncoding=nt.Iu,l.pn("localeEncoding"),r.Ae(80,function(){l.pn("searchEngines",null)})});var d={Jt:function(t,n,e){r.Ae(210,function(){return d.Jt(t,n,e)})},Xt:r.b,Mr:r.b};r.Ae(1e3,function(){var t,n,e,i,u,o,s,f,a,c,_,g,m,v=r.T({findModeRawQueryList:1,innerCSS:1,keyboard:1,newTabUrl_f:1,vomnibarPage_f:1}),d=null,S="",h=null,p=null,B=null,U=function(){return t||(t=chrome.storage&&chrome.storage.sync)},y=function(t){b(t,"sync")},b=function(t,n){var e,i,u,o;if("sync"===n){if(e=function(t){var n,e,i,u;if(h){for(n in r.T(t),h)!(i=(e=n.split(":")[0])===n)&&e in h||w(e,null!=(u=i?h[n]:null)?u.newValue:t[e],t);h=null}},r.T(t),i=l.zn&&l.zn())return h&&r.r(t,h),h=t,void i.then(function(){return b({},n)});for(u in h&&(r.r(t,h),h=null),t){if(o=t[u],8===(u.includes(":")?8:w(u,null!=o?o.newValue:null)))return h=t,void U().get(e);delete t[u]}}},T=function(){var t,n=[];for(t=0;t<arguments.length;t++)n[t]=arguments[t];console.log.apply(console,[(new Date).toLocaleString()].concat.call([].slice.call(arguments,0)))},w=function(t,n,e){var r,i,u,o,f,a;if(t in l.rn&&!(t in l.in)&&c(t)){if(r=l.rn[t],i=n&&"object"==typeof n&&n.$_serialize||""){if("split"===i&&!e)return 8;if(8===(n=s(t,n,e)))return}null!=n?(u=B?r:l.on(t),(a="object"!=typeof r)?(f=n,o=u):(f=JSON.stringify(n),o=JSON.stringify(u)),f!==o&&(f===(u=a?r:JSON.stringify(r))&&(n=r),B||T("sync.this: update",t,"string"==typeof n?(n.length>32?n.slice(0,30)+"...":n).replace(/\n/g,"\\n"):n),k(t,n))):null!=localStorage.getItem(t)&&(B||T("sync.this: reset",t),k(t,r))}},k=function(t,n){var e="keyMappings"===t||"exclusionRules"===t?"KeyMappings":"";if(!e)return M(t,n);r.me(e).then(M.bind(null,t,n)),r.Fe()},M=function(t,n){S=t,l.sn(t,n),S="",t in l.ln&&l.hn({N:6,d:[l.ln[t]]})},x=function(t,n){c(t)&&t!==S&&(d||(setTimeout(a,800),d=r.L()),d[t]=n)};if(e=function(t,n){var e,i,u;U()?(i=chrome.storage.local,u=function(){var n=r.x();if(n)return T("storage.local: Failed to update",t,":",n.message||n),n},null==n?i.remove(t,u):i.set(((e={})[t]=n,e),u)):l.cn=r.b},i=function(t){return t.replace(/[<`\u2028\u2029]/g,function(t){return"<"===t?"`l":"`"===t?"`d":"\u2028"===t?"`r":"`n"})},u=function(t){return t.replace(/"|\\[\\"]/g,function(t){return'"'===t?"`q":'\\"'===t?"`Q":"`S"})},o=function(t){var n={Q:'\\"',S:"\\\\",d:"`",l:"<",n:"\u2029",q:'"',r:"\u2028"};return t.replace(/`[QSdlnqr]/g,function(t){return n[t[1]]})},s=function(t,n,e){var r,i,u,s,f="";switch(n.$_serialize){case"split":for(r=n.k,i=n.s,u=0;u<i;u++){if(!(s=e[t+":"+u])||!s.startsWith(r))return 8;f+=s.slice(r.length)}break;case"single":return JSON.parse(o(JSON.stringify(n.d)));default:return T("Error: can not support the data format in synced settings data:",t,":",n.$_serialize),null}return"string"==typeof l.rn[t]?f=o(f):(f=o(JSON.stringify(f)),JSON.parse(f.slice(1,-1)))},f=function(t,n,e){var r,o,s,f,a,c,_,g,m,v,d,S;if(n&&!("string"!=typeof n?"object"!=typeof n:n.length<8192/6-40)&&(o="",!((r=JSON.stringify(n)).length<8192/6-40))){if(4*(r=i(r)).length<8093)return r;if((o=e.encode(r)).length<8093)return r;for(s=0,f=Date.now().toString(36)+":",a={},r="string"==typeof l.rn[t]?r.slice(1,-1):u(r),p||(p=new TextDecoder),c=0,_=(o=e.encode(r)).length;c<_;){for(g=Math.min(c+8134,_),m=void 0,v=0;g<_&&128==(192&o[g]);g--);if((v=(r=(m=p.decode(o.subarray(c,g))).slice(-6)).lastIndexOf("\\"))>r.length-2)m+="b",v=1;else if(v>0&&"u"===r[v+1])for(d=v=r.length-v;d++<6;m+="b");else v=0;if(m=JSON.parse('"'+m+'"'),v&&((S=m.endsWith("b"))||(g-=v),m=m.slice(0,v>1&&S?v-6:-1)),a[t+":"+s++]=f+m,c=g,s>=13)break}return a[t]={$_serialize:"split",k:f,s:s},a}},a=function(){var t,n,e,i,u,o,s,a,c=d,_=[],g=[],m=[],v=r.L(),S={};if(d=null,c&&l.cn===x){for(n in t=new TextEncoder,c)for(i=c[e=n],o="string"==typeof(u=l.rn[e])||"object"==typeof u&&"vimSync"!==e?0:13,null!=i?(s=f(e,i,t))&&"object"==typeof s?(v[e]=s,o=s[e].s):(S[e]=s?{$_serialize:"single",d:JSON.parse(s)}:i,g.push(e)):(m.push(e),_.push(e));o<13;o++)m.push(e+":"+o);for(e in p=t=null,_.length>0&&T("sync.cloud: reset",_.join(", ")),m.length>0&&U().remove(m),g.length>0&&(T("sync.cloud: update",g.join(", ")),U().set(S)),a=function(t){U().set(v[t],function(){var n=r.x();return n?T("Failed to update",t,":",n.message||n):T("sync.cloud: update (serialized) "+t),n})},v)a(e)}},c=function(t){return!(t in v)},_=function(t){l.De.Ge=null,r.Ae(t,function(){chrome.storage.local.get(function(t){var n,i,u,o,s,f,a,_,g;if(!l.on("vimSync")&&localStorage.length){for(T("storage.local: backup all settings from localStorage"),r.T(t),n=0,i=localStorage.length;n<i;n++)(u=localStorage.key(n))in l.rn&&(c(u)||"keyboard"===u)&&(o=l.rn[u],s=t[u],a=f=l.on(u),_=s,"object"==typeof o&&(_=JSON.stringify(s),a=JSON.stringify(f)),a!==_&&e(u,f),delete t[u]);(g=Object.keys(t)).length>0&&chrome.storage.local.remove(g)}})})},g=function(t,i,u){var o,s,f,a,_,g,m,v,d,h,p,y,k,M;if(2&i&&chrome.storage.local.get(function(t){var n,e,o,s,f=r.x();if(f)return l.zn=null,(i-=2)||u(),f;for(o in r.T(t),e=void 0!==(n=t.vimSync)||Object.keys(t).length>0,delete t.vimSync,e&&T("storage.local: restore settings to localStorage"),t)o in l.rn&&(S=o,s=null==(s=t[o])?l.rn[o]:s,l.sn(o,s));S="",null!=n&&l.sn("vimSync",n),r.Ae(100,function(){l.hn({N:6,d:l.Xe})}),(i-=2)||u()}),2!==i){if(r.T(t),!(o=t.vimSync||l.on("vimSync")))return n=o,l.cn=e,void(--i||u());for(f in t.vimSync||(T("sync.cloud: enable vimSync"),t.vimSync=o,U().set({vimSync:o})),s=[],t)f in l.xn&&s.push(f);for(a=[],_={},g=0,m=s;g<m.length;g++)for(f=m[g],v=l.xn[f],d=-1,h=void 0;d<13&&(h=d<0?f:f+":"+d)in t;d++)_[p=d<0?v:v+":"+d]=t[p]=t[h],delete t[h],a.push(h);for(s.length>0&&(chrome.storage.onChanged.removeListener(b),l.cn=r.b,U().remove(a),U().set(_,r.x),s.length=0),d=0,y=localStorage.length;d<y;d++)!((f=localStorage.key(d))in t)&&f in l.rn&&c(f)&&s.push(f);for(k=0,M=s;k<M.length;k++)w(f=M[k],null);for(f in t)f.includes(":")||w(f,t[f],t);l.pn("vimSync"),r.Ae(4,function(){--i||u()}),B&&T("sync.cloud: download settings to localStorage")}},l.mn.vimSync=function(t){var r,i,u;if(n=t,U()){if(i=(r=U().onChanged)||chrome.storage.onChanged,u=r?y:b,!t)return i.removeListener(u),void(l.cn!==e&&(l.cn=e,_(600)));l.cn!==x&&(i.addListener(u),l.cn=x,chrome.storage.local.clear())}},l.zn=function(){if(B);else{if(localStorage.length)return null;r.Fe(),B=r.me("KeyMappings").then(function(){return new Promise(function(t){n?U().get(function(n){var e=r.x();return e?(l.zn=null,t()):g(n,1,t),e}):g({},2,t)})}).then(function(){B=null})}return B},false===(n=l.on("vimSync"))||!n&&!l.De.He)return m=l.De.Ge,l.De.Ge=m?null:_,m&&_(6e3),void(l.cn=e);r.Fe(),U()?U().get(function(t){var n=r.x();if(n)return T("Error: failed to get storage:",n,"\n\tSo disable syncing temporarily."),l.mn.vimSync=l.cn=r.b,l.zn=null,n;B=Promise.resolve(),B=new Promise(function(n){return g(t,3,n)}).then(function(){B=null})}):l.zn=null}),r.Ae(150,function(){var t,e,i,u,o=chrome.browserAction;o&&(i=l.mn.showActionIcon,u=function(n){var i=l.Sn[n];fetch(i).then(function(t){return t.arrayBuffer()}).then(function(i){var u,o,l,s=new Uint8ClampedArray(i),f=i.byteLength/5,c=0|Math.sqrt(f/4),_=c+c,g=r.L();for(g[c]=new ImageData(s.subarray(0,f),c,c),g[_]=new ImageData(s.subarray(f),_,_),t[n]=g,u=e.get(n),e.delete(n),o=0,l=u.length;o<l;o++)a.ct(u[o],n,true)})},l.De.Ye=function(n){var r,i,u;if(null==n)return!!t;if(n){if(!t)for(i in t=[null,null,null],e=new Map,r=a.gn())0!==(u=r[+i][0].s).s&&a.ct(u.t,u.s)}else t&&setTimeout(function(){l.on("showActionIcon")||(t=null,e=null)},200)},a.ct=function(n,i,l){var s,f,a;(s=t[i])?(f=o.setIcon,a={tabId:n,imageData:s},l?f(a,r.x):f(a)):e.has(i)?e.get(i).push(n):(setTimeout(u,0,i),e.set(i,[n]))},l.mn.showActionIcon=function(t){i(t),l.De.Ye(t);var e=n("name");t||(e+="\n\n"+n("noActiveState")),o.setTitle({title:e})},l.pn("showActionIcon"))}),r.Ae(600,function(){function t(){h&&(h.ju=null),B=y=h=v=null,b&&clearTimeout(b),p&&clearTimeout(p),T=k=M=b=p=0,S="",r.y()}function e(){var n=Date.now()-T;if(n>5e3||n<-5e3)return t();b=setTimeout(e,3e4)}function i(){var t,n;if(p=0,(t=h)&&!t.Fu)return h=null,t.ju?((n=Date.now())<T&&(T=n-1e3),o(t.oo,t.ju)):void 0}function u(t,e,i,u,o){var s,f,a,_,d,p,U,b,T,x,R,C,O,D,N,I,E,j;if(t.ju){for(h=null,f=(s=e.length>0)?e[0]:null,_={},k=u,M=o,s&&(g||null!=e[0].s)&&(B=new Map),y=[],d=new Set,p=(" "+l.en.s+" ").includes(" type-letter "),U=0,b=i?0:1,T=e.length;U<T;U++)R=(x=e[U]).title,C=x.u,O=x.e,D="",N=null!=x.s,I=g&&!(i&&0===U)&&("tab"===O?x.s!==m.gt:"history"===O&&!N),d.has(C)?C=":"+(U+b)+" "+C:d.add(C),I&&(_.lu=O,D=" ~"+(U+b)+"~"),E={content:C,description:D=(R||p?(R?R+" <dim>":"<dim>")+(p?"["+x.e[0].toUpperCase()+"] ":"")+(R?"-</dim> <url>":"</dim><url>"):"<url>")+x.textSplit+"</url>"+(D&&"<dim>"+D+"</dim>")},I&&(E.deletable=true),N&&(_.Oi=x.s),(I||N)&&(B.set(C,_),_={}),y.push(E);if(v=t.oo,i)if("search"===f.e){if(a=((j=f.p)&&"<dim>"+(r.R(j)+c)+"</dim>")+"<url>"+f.textSplit+"</url>",w=2,f=e[1])switch(f.e){case"math":y[1].description=f.textSplit+" = <url><match>"+f.t+"</match></url>"}}else w=3,a=y[0].description;else 1!==w&&(a="<dim>"+n("OpenC")+"</dim><url>%s</url>",w=1);i&&(S=e[0].u,y.shift()),a&&chrome.omnibox.setDefaultSuggestion({description:a}),t.ju(y),r.y()}else h===t&&(h=null)}function o(t,n){var o,s,f,a;t=t.trim().replace(r.O," "),h&&(h.ju=(o=t===h.oo)?n:null,o)||(t!==v?1===k&&t.startsWith(v)?n([]):(h={ju:n,oo:t,Fu:false},p||(s=Date.now(),(f=l.en.t+T-s)>30&&f<3e3?p=setTimeout(i,f):(h.Fu=true,b||(b=setTimeout(e,3e4)),T=s,B=y=null,S="",a=k<2||!t.startsWith(v)?0:3===k?t.includes(" ")?0:8:M,d.Jt(t,{o:"omni",t:a,r:x,c:U,f:1},u.bind(null,h))))):y&&n(y))}function s(t,n,e){return t?":"===t[0]&&/^:([1-9]|1[0-2]) /.test(t)&&(t=t.slice(" "===t[2]?3:4)):t=r.V(""),"file://"===t.slice(0,7).toLowerCase()&&(t=r.ze(t)),null!=e?a.ot[5]({s:e}):a.ot[6]({u:t,r:"currentTab"===n?0:"newForegroundTab"===n?-1:-2},null)}var c,_,g,v,S,h,p,B,U,y,b,T,w,k,M,x,R=chrome.omnibox;R&&(c=n("colon")+n("NS"),g=!!(_=R.onDeleteSuggestion)&&"function"==typeof _.addListener,v=null,S="",h=null,p=0,B=null,U=128,y=null,b=0,w=0,k=0,M=0,x=f<60?6:12,R.onInputStarted.addListener(function(){if(chrome.windows.getCurrent(function(t){var n=t&&t.width;U=n?Math.floor((n-160/devicePixelRatio)/7.72):128}),b)return t()}),R.onInputChanged.addListener(o),R.onInputEntered.addListener(function n(e,u){var o,l=h;if(l&&l.ju){if(l.ju=n.bind(null,e,u),l.Fu)return;return p&&clearTimeout(p),i()}return e=e.trim().replace(r.O," "),null===v&&e?d.Jt(e,{o:"omni",t:0,r:3,c:U,f:1},function(t,n){return n?s(t[0].u,u,t[0].s):s(e,u)}):(S&&e===v&&(e=S),o=B&&B.get(e)&&B.get(e).Oi,t(),s(e,u,o))}),g&&_.addListener(function(t){var n=parseInt(t.slice(t.lastIndexOf("~",t.length-2)+1))-1,e=y&&y[n].content,r=e&&B&&B.get(e)||null,i=r&&r.lu;if(i)return":"===e[0]&&(e=e.slice(e.indexOf(" ")+1)),a.Xt({t:i,u:"tab"===i?r.Oi:e});console.log("Error: want to delete a suggestion but no related info found (may spend too long before deleting).")}))}),chrome.runtime.onInstalled.addListener(l.De.Be=function(t){var e=t.reason;if("install"===e)e="";else{if("update"!==e)return;e=t.previousVersion}l.De.Be&&(chrome.runtime.onInstalled.removeListener(l.De.Be),l.De.Be=null,r.Ae(500,function(){var i,u;chrome.tabs.query({status:"complete"},function(t){var n,e,i,u,o=chrome.tabs,s=r.x,f=/^(file|ftps?|https?):/,a=location.origin.length,c=l.C.Un;for(n=t.length,e=c.length-1;0<=--n;)if(f.test(t[n].url))for(i=t[n].id,u=0;u<e;++u)o.executeScript(i,{file:c[u].slice(a),allFrames:true},s)}),console.log("%cVimium C%c has been %cinstalled%c with %o at %c%s%c.","color:red","color:auto","color:#0c85e9","color:auto",t,"color:#0c85e9",new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toJSON().slice(0,-5).replace("T"," "),"color:auto"),l.C.qn&&console.log("Sorry, but some commands of Vimium C require the permission to run in incognito mode."),e?parseFloat(l.C.vn)<=parseFloat(e)||((i=l.De).Ge?i.Ge(6e3):i.Ge=true,l.on("notifyUpdate")&&(e="vimium_c-upgrade-notification",u={type:"basic",iconUrl:location.origin+"/icons/icon128.png",title:"Vimium C "+n("Upgrade"),message:n("upgradeMsg",[l.C.Cn])+n("upgradeMsg2")+"\n\n"+n("clickForMore")},f<67&&(u.isClickable=true),f>=70&&(u.silent=true),chrome.notifications&&chrome.notifications.create(e,u,function(t){var n;if(n=r.x())return n;e=t||e,chrome.notifications.onClicked.addListener(function(t){t===e&&(chrome.notifications.clear(e),a.ot[19]({u:r.V("vimium://release")}))})}))):(l.zn&&l.zn()||Promise.resolve()).then(function(){a.ot[19]({u:l.C.Nn+"#commands"})})}))}),r.Fe=function(t){function n(){if(Math.abs(performance.now()-e)<1e5)i=setTimeout(n,3e5);else{i=0;var t=l.mn;KeyMappings&&(t.keyMappings=null,KeyMappings=null)}}var e=0,i=0,u=0;return r.Fe=function(t){t&&(u=u+t>0?u+t:0),u>0||!KeyMappings?i&&(clearTimeout(i),i=0):(e=performance.now(),i=i||setTimeout(n,3e5))},r.Fe(t)},r.Ae(1200,function(){l.De.Be&&chrome.runtime.onInstalled.removeListener(l.De.Be),l.De.Be=null,document.documentElement.innerHTML="",r.y()});